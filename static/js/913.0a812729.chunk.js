"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[913],{5913:function(e,t,s){s.r(t),s.d(t,{default:function(){return H}});var r=s(5671),o=s(3144),n=s(136),i=s(5716),a=s(2791),l=s(885),u="ProfileInfo_descriptionBlock__2XdJx",c="ProfileInfo_picture__E5rTG",d="ProfileInfo_mainPhoto__XfMvC",f="ProfileInfo_contact__5-BmK",p=s(9770),h=s(8388),m=s(184),j=function(e){var t=(0,a.useState)(!1),s=(0,l.Z)(t,2),r=s[0],o=s[1],n=(0,a.useState)(e.status),i=(0,l.Z)(n,2),u=i[0],c=i[1];(0,a.useEffect)((function(){c(e.status)}),[e.status]);return(0,m.jsxs)("div",{children:[!r&&(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Status:"}),(0,m.jsx)("span",{onDoubleClick:function(){o(!0)},children:e.status||"-----"})]}),r&&(0,m.jsx)("div",{children:(0,m.jsx)("input",{onChange:function(e){c(e.currentTarget.value)},onBlur:function(){o(!1),e.updateStatus(u)},autoFocus:!0,value:u})})]})},x=s(2914),v=s(3592),b=s(6139),g=s(704),P=s(6059),_=(0,g.Z)({form:"edit-profile"})((function(e){var t=e.handleSubmit,s=e.error;return(0,m.jsxs)("form",{onSubmit:t,children:[(0,m.jsx)("div",{children:(0,m.jsx)("button",{children:"Save"})}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Full name:"}),": ",(0,m.jsx)(b.Z,{component:v.I,validate:[],name:"fullName",placeholder:"Full name"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Looking for a job:"}),": ",(0,m.jsx)(b.Z,{component:v.I,type:"checkbox",validate:[],name:"lookingForAJob",placeholder:"Looking for a job"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"My professional skills:"}),":",(0,m.jsx)(b.Z,{component:v.g,validate:[],name:"lookingForAJobDescription",placeholder:"My professional skills"})]}),(0,m.jsx)("div",{}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"About me:"}),": ",(0,m.jsx)(b.Z,{component:v.g,validate:[],name:"aboutMe",placeholder:"About me"})]}),s&&(0,m.jsx)("div",{className:P.Z.formSummaryError,children:s})]})})),k=function(e){var t=e.profile,s=e.isOwner,r=e.goToEditMode;return(0,m.jsxs)("div",{children:[s&&(0,m.jsx)("div",{children:(0,m.jsx)("button",{onClick:r,children:"Edit"})}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Full name:"}),": ",t.fullName]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Looking for a job:"}),": ",t.lookingForAJob?"yes":"no"]}),t.lookingForAJob&&(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"My professional skills:"}),":",t.lookingForAJobDescription]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Contacts:"}),": ",Object.entries(t.contacts).map((function(e){var t=(0,l.Z)(e,2),s=t[0],r=t[1];return(0,m.jsx)(Z,{contactTitle:s,contactValue:r},s)}))]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"About me:"}),": ",t.aboutMe]})]})},Z=function(e){var t=e.contactTitle,s=e.contactValue;return(0,m.jsxs)("div",{className:f,children:[(0,m.jsx)("b",{children:t}),":",s]})},C=function(e){var t=e.profile,s=e.status,r=e.updateStatus,o=e.isOwner,n=e.savePhoto,i=e.saveProfile,f=(0,a.useState)(!1),v=(0,l.Z)(f,2),b=v[0],g=v[1];if(!t)return(0,m.jsx)(h.p,{});return(0,m.jsx)("div",{children:(0,m.jsxs)("div",{children:[(0,m.jsx)("img",{className:c,src:p}),(0,m.jsxs)("div",{className:u,children:[(0,m.jsx)("img",{src:t.photos.large||x,className:d}),o&&(0,m.jsx)("input",{type:"file",onChange:function(e){e.target.files&&e.target.files[0]&&n(e.target.files[0])}}),b?(0,m.jsx)(_,{initialValues:t,onSubmit:function(e){i(e.fullName,e.lookingForAJob,e.lookingForAJobDescription,e.aboutMe),g(!1)}}):(0,m.jsx)(k,{profile:t,isOwner:o,goToEditMode:function(){g(!0)}})]}),(0,m.jsx)(j,{status:s,updateStatus:r})]})})},S="MyPosts_postsBlock__3e4Ds",y="MyPosts_posts__6EdvY",F="Post_item__+LDvX",N="Post_posts__KH5L1",M=s(8986),w=function(e){return(0,m.jsx)("div",{className:N,children:(0,m.jsxs)("div",{className:F,children:[(0,m.jsx)("img",{src:M}),e.message,(0,m.jsx)("div",{children:(0,m.jsxs)("span",{children:["Like",e.likeCount]})}),(0,m.jsx)("button",{onClick:e.deletePost,children:"Delete post"})]})})},A=s(3079),D=s(2381),I=s(8687),E=(0,A.D)(30),O=(0,g.Z)({form:"profileAddNewPostForm"})((function(e){var t=(0,I.I0)();return(0,m.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,m.jsx)("div",{children:(0,m.jsx)(b.Z,{name:"newPostText",component:v.g,validate:[A.C,E],placeholder:"Post message",onClick:function(){return t((0,D.mc)("profileAddNewPostForm"))}})}),(0,m.jsx)("div",{children:(0,m.jsx)("button",{children:"Add post"})})]})})),T=a.memo((function(e){var t=e.postData.map((function(t){return(0,m.jsx)(w,{message:t.message,likeCount:t.likeCount,deletePost:function(){return e.deletePost(t.id)}},t.id)}));return(0,m.jsxs)("div",{className:S,children:[(0,m.jsx)("h3",{children:"My posts"}),(0,m.jsx)(O,{onSubmit:function(t){e.addPost(t.newPostText)}}),(0,m.jsx)("div",{className:y,children:t})]})})),J=s(4136),L=s(7781),B=(0,L.qC)((0,I.$j)((function(e){return{postData:e.profilePage.postData}}),(function(e){return{addPost:function(t){e((0,J.Wl)(t))},deletePost:function(t){e((0,J.fu)(t))}}})))(T),q=function(e){return(0,m.jsxs)("div",{children:[(0,m.jsx)(C,{profile:e.profile,saveProfile:e.saveProfile,status:e.status,updateStatus:e.updateStatus,isOwner:e.isOwner,savePhoto:e.savePhoto}),(0,m.jsx)(B,{})]})},U=s(9271),V=function(e){return e.profilePage.profile},X=function(e){return e.profilePage.status},$=function(e){return e.auth.id},G=function(e){return e.auth.isAuth},K=function(e){(0,n.Z)(s,e);var t=(0,i.Z)(s);function s(){return(0,r.Z)(this,s),t.apply(this,arguments)}return(0,o.Z)(s,[{key:"refreshProfile",value:function(){var e=+this.props.match.params.userId;e||(e=this.props.id)||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.setStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return this.props.profile?(0,m.jsx)("div",{children:(0,m.jsx)(q,{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,isOwner:!this.props.match.params.userId,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile})}):(0,m.jsx)(h.p,{})}}]),s}(a.Component),H=(0,L.qC)((0,I.$j)((function(e){return{profile:V(e),status:X(e),id:$(e),isAuth:G(e)}}),{getUserProfile:J.d$,setStatus:J.jQ,updateStatus:J.OG,savePhoto:J.Tw,saveProfile:J.Ms}),U.EN)(K)},3592:function(e,t,s){s.d(t,{g:function(){return u},I:function(){return c}});var r=s(1413),o=s(5987),n=(s(2791),s(6059)),i=s(184),a=["input","meta"],l=["input","meta"],u=function(e){var t=e.input,s=e.meta,l=(0,o.Z)(e,a),u=s.touched&&s.error;return(0,i.jsxs)("div",{className:n.Z.formControl+" "+(u?n.Z.error:""),children:[(0,i.jsx)("div",{children:(0,i.jsx)("textarea",(0,r.Z)((0,r.Z)({},t),l))}),u&&(0,i.jsx)("span",{children:s.error})]})},c=function(e){var t=e.input,s=e.meta,a=(0,o.Z)(e,l),u=s.touched&&s.error;return(0,i.jsxs)("div",{className:n.Z.formControl+" "+(u?n.Z.error:""),children:[(0,i.jsx)("div",{children:(0,i.jsx)("input",(0,r.Z)((0,r.Z)({},t),a))}),u&&(0,i.jsx)("span",{children:s.error})]})}},3079:function(e,t,s){s.d(t,{C:function(){return r},D:function(){return o}});var r=function(e){if(!e)return"Field is required"},o=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbols")}}},6059:function(e,t){t.Z={formControl:"FormsControls_formControl__2E-M1",error:"FormsControls_error__OxiLB",formSummaryError:"FormsControls_formSummaryError__gypjP"}},9770:function(e,t,s){e.exports=s.p+"static/media/Cappadocia_2.a9de05dec6fdb2947bfb.jpg"},8986:function(e,t,s){e.exports=s.p+"static/media/cat.635a9fb09bf4880b1132.jpg"}}]);
//# sourceMappingURL=913.0a812729.chunk.js.map