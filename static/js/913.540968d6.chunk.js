"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[913],{5913:function(e,t,s){s.r(t),s.d(t,{default:function(){return K}});var r=s(5671),n=s(3144),o=s(136),i=s(5716),a=s(2791),u=s(885),l="ProfileInfo_descriptionBlock__2XdJx",c="ProfileInfo_mainPhoto__XfMvC",d="ProfileInfo_contact__5-BmK",f=s(8388),h=s(184),p=function(e){var t=(0,a.useState)(!1),s=(0,u.Z)(t,2),r=s[0],n=s[1],o=(0,a.useState)(e.status),i=(0,u.Z)(o,2),l=i[0],c=i[1];(0,a.useEffect)((function(){c(e.status)}),[e.status]);return(0,h.jsxs)("div",{children:[!r&&(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"Status:"}),(0,h.jsx)("span",{onDoubleClick:function(){n(!0)},children:e.status||"-----"})]}),r&&(0,h.jsx)("div",{children:(0,h.jsx)("input",{onChange:function(e){c(e.currentTarget.value)},onBlur:function(){n(!1),e.updateStatus(l)},autoFocus:!0,value:l})})]})},m=s(2914),j=s(3592),x=s(6139),v=s(704),b=s(6059),P=(0,v.Z)({form:"edit-profile"})((function(e){var t=e.handleSubmit,s=e.error;return(0,h.jsxs)("form",{onSubmit:t,children:[(0,h.jsx)("div",{children:(0,h.jsx)("button",{children:"Save"})}),s&&(0,h.jsx)("div",{className:b.Z.formSummaryError,children:s}),(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"Full name:"}),": ",(0,h.jsx)(x.Z,{component:j.I,validate:[],name:"fullName",placeholder:"Full name"})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"Looking for a job:"}),": ",(0,h.jsx)(x.Z,{component:j.I,type:"checkbox",validate:[],name:"lookingForAJob",placeholder:"Looking for a job"})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"My professional skills:"}),":",(0,h.jsx)(x.Z,{component:j.g,validate:[],name:"lookingForAJobDescription",placeholder:"My professional skills"})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"About me:"}),": ",(0,h.jsx)(x.Z,{component:j.g,validate:[],name:"aboutMe",placeholder:"About me"})]})]})})),g=function(e){var t=e.profile,s=e.isOwner,r=e.goToEditMode;return(0,h.jsxs)("div",{children:[s&&(0,h.jsx)("div",{children:(0,h.jsx)("button",{onClick:r,children:"Edit"})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"Full name:"}),": ",t.fullName]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"Looking for a job:"}),": ",t.lookingForAJob?"yes":"no"]}),t.lookingForAJob&&(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"My professional skills:"}),":",t.lookingForAJobDescription]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"Contacts:"}),": ",Object.entries(t.contacts).map((function(e){var t=(0,u.Z)(e,2),s=t[0],r=t[1];return(0,h.jsx)(k,{contactTitle:s,contactValue:r},s)}))]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"About me:"}),": ",t.aboutMe]})]})},k=function(e){var t=e.contactTitle,s=e.contactValue;return(0,h.jsxs)("div",{className:d,children:[(0,h.jsx)("b",{children:t}),":",s]})},_=function(e){var t=e.profile,s=e.status,r=e.updateStatus,n=e.isOwner,o=e.savePhoto,i=e.saveProfile,d=(0,a.useState)(!1),j=(0,u.Z)(d,2),x=j[0],v=j[1];if(!t)return(0,h.jsx)(f.p,{});return(0,h.jsx)("div",{children:(0,h.jsxs)("div",{children:[(0,h.jsxs)("div",{className:l,children:[(0,h.jsx)("img",{src:t.photos.large||m,className:c}),n&&(0,h.jsx)("input",{type:"file",onChange:function(e){e.target.files&&e.target.files[0]&&o(e.target.files[0])}}),x?(0,h.jsx)(P,{initialValues:t,onSubmit:function(e){i(e.fullName,e.lookingForAJob,e.lookingForAJobDescription,e.aboutMe,e.contacts).then((function(){v(!1)}))}}):(0,h.jsx)(g,{profile:t,isOwner:n,goToEditMode:function(){v(!0)}})]}),(0,h.jsx)(p,{status:s,updateStatus:r})]})})},Z="MyPosts_postsBlock__3e4Ds",C="MyPosts_posts__6EdvY",S="Post_item__+LDvX",y="Post_posts__KH5L1",F=s(8986),M=function(e){return(0,h.jsx)("div",{className:y,children:(0,h.jsxs)("div",{className:S,children:[(0,h.jsx)("img",{src:F}),e.message,(0,h.jsx)("div",{children:(0,h.jsxs)("span",{children:["Like",e.likeCount]})}),(0,h.jsx)("button",{onClick:e.deletePost,children:"Delete post"})]})})},N=s(3079),w=s(2381),A=s(8687),D=(0,N.D)(30),I=(0,v.Z)({form:"profileAddNewPostForm"})((function(e){var t=(0,A.I0)();return(0,h.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,h.jsx)("div",{children:(0,h.jsx)(x.Z,{name:"newPostText",component:j.g,validate:[N.C,D],placeholder:"Post message",onClick:function(){return t((0,w.mc)("profileAddNewPostForm"))}})}),(0,h.jsx)("div",{children:(0,h.jsx)("button",{children:"Add post"})})]})})),E=a.memo((function(e){var t=e.postData.map((function(t){return(0,h.jsx)(M,{message:t.message,likeCount:t.likeCount,deletePost:function(){return e.deletePost(t.id)}},t.id)}));return(0,h.jsxs)("div",{className:Z,children:[(0,h.jsx)("h3",{children:"My posts"}),(0,h.jsx)(I,{onSubmit:function(t){e.addPost(t.newPostText)}}),(0,h.jsx)("div",{className:C,children:t})]})})),O=s(4136),J=s(7781),T=(0,J.qC)((0,A.$j)((function(e){return{postData:e.profilePage.postData}}),(function(e){return{addPost:function(t){e((0,O.Wl)(t))},deletePost:function(t){e((0,O.fu)(t))}}})))(E),L=function(e){return(0,h.jsxs)("div",{children:[(0,h.jsx)(_,{profile:e.profile,saveProfile:e.saveProfile,status:e.status,updateStatus:e.updateStatus,isOwner:e.isOwner,savePhoto:e.savePhoto}),(0,h.jsx)(T,{})]})},B=s(9271),q=function(e){return e.profilePage.profile},U=function(e){return e.profilePage.status},V=function(e){return e.auth.id},X=function(e){return e.auth.isAuth},$=function(e){(0,o.Z)(s,e);var t=(0,i.Z)(s);function s(){return(0,r.Z)(this,s),t.apply(this,arguments)}return(0,n.Z)(s,[{key:"refreshProfile",value:function(){var e=+this.props.match.params.userId;e||(e=this.props.id)||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.setStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return this.props.profile?(0,h.jsx)("div",{children:(0,h.jsx)(L,{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,isOwner:!this.props.match.params.userId,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile})}):(0,h.jsx)(f.p,{})}}]),s}(a.Component),K=(0,J.qC)((0,A.$j)((function(e){return{profile:q(e),status:U(e),id:V(e),isAuth:X(e)}}),{getUserProfile:O.d$,setStatus:O.jQ,updateStatus:O.OG,savePhoto:O.Tw,saveProfile:O.Ms}),B.EN)($)},3592:function(e,t,s){s.d(t,{g:function(){return l},I:function(){return c}});var r=s(1413),n=s(5987),o=(s(2791),s(6059)),i=s(184),a=["input","meta"],u=["input","meta"],l=function(e){var t=e.input,s=e.meta,u=(0,n.Z)(e,a),l=s.touched&&s.error;return(0,i.jsxs)("div",{className:o.Z.formControl+" "+(l?o.Z.error:""),children:[(0,i.jsx)("div",{children:(0,i.jsx)("textarea",(0,r.Z)((0,r.Z)({},t),u))}),l&&(0,i.jsx)("span",{children:s.error})]})},c=function(e){var t=e.input,s=e.meta,a=(0,n.Z)(e,u),l=s.touched&&s.error;return(0,i.jsxs)("div",{className:o.Z.formControl+" "+(l?o.Z.error:""),children:[(0,i.jsx)("div",{children:(0,i.jsx)("input",(0,r.Z)((0,r.Z)({},t),a))}),l&&(0,i.jsx)("span",{children:s.error})]})}},3079:function(e,t,s){s.d(t,{C:function(){return r},D:function(){return n}});var r=function(e){if(!e)return"Field is required"},n=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbols")}}},6059:function(e,t){t.Z={formControl:"FormsControls_formControl__2E-M1",error:"FormsControls_error__OxiLB",formSummaryError:"FormsControls_formSummaryError__gypjP"}},8986:function(e,t,s){e.exports=s.p+"static/media/cat.635a9fb09bf4880b1132.jpg"}}]);
//# sourceMappingURL=913.540968d6.chunk.js.map