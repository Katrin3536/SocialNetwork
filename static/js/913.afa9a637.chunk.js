"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[913],{5913:function(e,t,s){s.r(t),s.d(t,{default:function(){return K}});var o=s(5671),r=s(3144),n=s(136),i=s(5716),a=s(2791),l=s(885),u="ProfileInfo_descriptionBlock__2XdJx",c="ProfileInfo_mainPhoto__XfMvC",d="ProfileInfo_contact__5-BmK",f=s(8388),h=s(184),p=function(e){var t=(0,a.useState)(!1),s=(0,l.Z)(t,2),o=s[0],r=s[1],n=(0,a.useState)(e.status),i=(0,l.Z)(n,2),u=i[0],c=i[1];(0,a.useEffect)((function(){c(e.status)}),[e.status]);return(0,h.jsxs)("div",{children:[!o&&(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"Status:"}),(0,h.jsx)("span",{onDoubleClick:function(){r(!0)},children:e.status||"-----"})]}),o&&(0,h.jsx)("div",{children:(0,h.jsx)("input",{onChange:function(e){c(e.currentTarget.value)},onBlur:function(){r(!1),e.updateStatus(u)},autoFocus:!0,value:u})})]})},m=s(2914),x=s(3592),j=s(6139),v=s(704),b=s(6059),_=(0,v.Z)({form:"edit-profile"})((function(e){var t=e.handleSubmit,s=e.error;return(0,h.jsxs)("form",{onSubmit:t,children:[(0,h.jsx)("div",{children:(0,h.jsx)("button",{children:"Save"})}),s&&(0,h.jsx)("div",{className:b.Z.formSummaryError,children:s}),(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"Full name:"}),": ",(0,h.jsx)(j.Z,{component:x.I,validate:[],name:"fullName",placeholder:"Full name"})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"Looking for a job:"}),": ",(0,h.jsx)(j.Z,{component:x.I,type:"checkbox",validate:[],name:"lookingForAJob",placeholder:"Looking for a job"})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"My professional skills:"}),":",(0,h.jsx)(j.Z,{component:x.g,validate:[],name:"lookingForAJobDescription",placeholder:"My professional skills"})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"About me:"}),": ",(0,h.jsx)(j.Z,{component:x.g,validate:[],name:"aboutMe",placeholder:"About me"})]})]})})),g=function(e){var t=e.profile,s=e.isOwner,o=e.goToEditMode;return(0,h.jsxs)("div",{children:[s&&(0,h.jsx)("div",{children:(0,h.jsx)("button",{onClick:o,children:"Edit"})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"Full name:"}),": ",t.fullName]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"Looking for a job:"}),": ",t.lookingForAJob?"yes":"no"]}),t.lookingForAJob&&(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"My professional skills:"}),":",t.lookingForAJobDescription]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"Contacts:"}),": ",Object.entries(t.contacts).map((function(e){var t=(0,l.Z)(e,2),s=t[0],o=t[1];return(0,h.jsx)(P,{contactTitle:s,contactValue:o},s)}))]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"About me:"}),": ",t.aboutMe]})]})},P=function(e){var t=e.contactTitle,s=e.contactValue;return(0,h.jsxs)("div",{className:d,children:[(0,h.jsx)("b",{children:t}),":",s]})},k=function(e){var t=e.profile,s=e.status,o=e.updateStatus,r=e.isOwner,n=e.savePhoto,i=e.saveProfile,d=(0,a.useState)(!1),x=(0,l.Z)(d,2),j=x[0],v=x[1];if(!t)return(0,h.jsx)(f.p,{});return(0,h.jsx)("div",{children:(0,h.jsxs)("div",{children:[(0,h.jsxs)("div",{className:u,children:[(0,h.jsx)("img",{src:t.photos.large||m,className:c}),r&&(0,h.jsx)("input",{type:"file",onChange:function(e){e.target.files&&e.target.files[0]&&n(e.target.files[0])}}),j?(0,h.jsx)(_,{initialValues:t,onSubmit:function(e){i(e.fullName,e.lookingForAJob,e.lookingForAJobDescription,e.aboutMe,e.contacts).then((function(){v(!1)}))}}):(0,h.jsx)(g,{profile:t,isOwner:r,goToEditMode:function(){v(!0)}})]}),(0,h.jsx)(p,{status:s,updateStatus:o})]})})},C="MyPosts_postsBlock__3e4Ds",Z="MyPosts_posts__6EdvY",S="Post_item__+LDvX",y="Post_posts__KH5L1",F=s(8986),w=function(e){return(0,h.jsx)("div",{className:y,children:(0,h.jsxs)("div",{className:S,children:[(0,h.jsx)("img",{src:F}),e.message,(0,h.jsx)("div",{children:(0,h.jsxs)("span",{children:["Like",e.likeCount]})}),(0,h.jsx)("button",{onClick:e.deletePost,children:"Delete post"})]})})},D=s(3079),M=s(2381),N=s(8687),A=(0,D.D)(30),I=(0,v.Z)({form:"profileAddNewPostForm"})((function(e){var t=(0,N.I0)();return(0,h.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,h.jsx)("div",{children:(0,h.jsx)(j.Z,{name:"newPostText",component:x.g,validate:[D.C,A],placeholder:"Post message",onClick:function(){return t((0,M.mc)("profileAddNewPostForm"))}})}),(0,h.jsx)("div",{children:(0,h.jsx)("button",{children:"Add post"})})]})})),E=a.memo((function(e){var t=e.postData.map((function(t){return(0,h.jsx)(w,{message:t.message,likeCount:t.likeCount,deletePost:function(){return e.deletePost(t.id)}},t.id)}));return(0,h.jsxs)("div",{className:C,children:[(0,h.jsx)("h3",{children:"My posts"}),(0,h.jsx)(I,{onSubmit:function(t){e.addPost(t.newPostText)}}),(0,h.jsx)("div",{className:Z,children:t})]})})),O=s(4136),J=s(7781),T=(0,J.qC)((0,N.$j)((function(e){return{postData:e.profilePage.postData}}),(function(e){return{addPost:function(t){e((0,O.Wl)(t))},deletePost:function(t){e((0,O.fu)(t))}}})))(E),L=function(e){return(0,h.jsxs)("div",{children:[(0,h.jsx)(k,{profile:e.profile,saveProfile:e.saveProfile,status:e.status,updateStatus:e.updateStatus,isOwner:e.isOwner,savePhoto:e.savePhoto}),(0,h.jsx)(T,{})]})},B=s(9271),q=function(e){return e.profilePage.profile},U=function(e){return e.profilePage.status},V=function(e){return e.auth.id},X=function(e){return e.auth.isAuth},$=function(e){(0,n.Z)(s,e);var t=(0,i.Z)(s);function s(){return(0,o.Z)(this,s),t.apply(this,arguments)}return(0,r.Z)(s,[{key:"refreshProfile",value:function(){var e=+this.props.match.params.userId;e||(e=this.props.id)||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.setStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return this.props.profile?(0,h.jsx)("div",{children:(0,h.jsx)(L,{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,isOwner:!this.props.match.params.userId,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile})}):(0,h.jsx)(f.p,{})}}]),s}(a.Component),K=(0,J.qC)((0,N.$j)((function(e){return{profile:q(e),status:U(e),id:V(e),isAuth:X(e)}}),{getUserProfile:O.d$,setStatus:O.jQ,updateStatus:O.OG,savePhoto:O.Tw,saveProfile:O.Ms}),B.EN)($)},3592:function(e,t,s){s.d(t,{g:function(){return u},I:function(){return c}});var o=s(1413),r=s(5987),n=(s(2791),s(6059)),i=s(184),a=["input","meta"],l=["input","meta"],u=function(e){var t=e.input,s=e.meta,l=(0,r.Z)(e,a),u=s.touched&&s.error;return(0,i.jsxs)("div",{className:n.Z.formControl+" "+(u?n.Z.error:""),children:[(0,i.jsx)("div",{children:(0,i.jsx)("textarea",(0,o.Z)((0,o.Z)({},t),l))}),u&&(0,i.jsx)("span",{children:s.error})]})},c=function(e){var t=e.input,s=e.meta,a=(0,r.Z)(e,l),u=s.touched&&s.error;return(0,i.jsxs)("div",{className:n.Z.formControl+" "+(u?n.Z.error:""),children:[(0,i.jsx)("div",{children:(0,i.jsx)("input",(0,o.Z)((0,o.Z)({},t),a))}),u&&(0,i.jsx)("span",{children:s.error})]})}},3079:function(e,t,s){s.d(t,{C:function(){return o},D:function(){return r}});var o=function(e){if(!e)return"Field is required"},r=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbols")}}},6059:function(e,t){t.Z={formControl:"FormsControls_formControl__2E-M1",error:"FormsControls_error__OxiLB",formSummaryError:"FormsControls_formSummaryError__gypjP",loginDesc:"FormsControls_loginDesc__wIc7Z",form:"FormsControls_form__-Qx8s",login:"FormsControls_login__7-5+7",checkbox:"FormsControls_checkbox__yCq-O"}},8986:function(e,t,s){e.exports=s.p+"static/media/cat.635a9fb09bf4880b1132.jpg"}}]);
//# sourceMappingURL=913.afa9a637.chunk.js.map